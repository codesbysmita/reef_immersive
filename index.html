<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Reef Immersive VR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <style>
      #subtitle {
        position: absolute;
        bottom: 5%;
        width: 100%;
        text-align: center;
        color: white;
        font-size: 1.2em;
        text-shadow: 2px 2px 4px #000;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div id="subtitle"></div>

    <a-scene>
      <!-- Audio -->
      <a-assets>
        <audio id="audio1" src="https://drive.google.com/uc?export=download&id=1-W4p3sa5nEP4vy93RSkWVVYaARRAuZFw"></audio>
        <audio id="audio2" src="https://drive.google.com/uc?export=download&id=1-eZGWpPB3dxPwYj2_PPZEfrH8mMz2-v1"></audio>
        <audio id="audio3" src="https://drive.google.com/uc?export=download&id=1-ib63LuD_F7eadEO6S1DloOtUDEwp3wY"></audio>
        <audio id="audio4" src="https://drive.google.com/uc?export=download&id=1-irzFKdTZTmaTET2qMtBzlTQvFvCY--p"></audio>
        <audio id="audio5" src="https://drive.google.com/uc?export=download&id=1-nF1UqcxB-h6e8P7AnuYLhOrqe3RNbNp"></audio>
      </a-assets>

      <!-- Camera -->
      <a-entity camera look-controls position="0 1.6 0"></a-entity>

      <!-- Images of Coral (free online) -->
      <a-plane id="coral1" position="-2 1 -3" width="1.5" height="1" material="src: url(https://images.unsplash.com/photo-1582305210745-bb3d865f3d2f)"></a-plane>
      <a-plane id="coral2" position="0 1 -3" width="1.5" height="1" material="src: url(https://images.unsplash.com/photo-1592261736990-2e8dc5bbbd77)"></a-plane>
      <a-plane id="coral3" position="2 1 -3" width="1.5" height="1" material="src: url(https://images.unsplash.com/photo-1566438480900-0609be27a4be)"></a-plane>
      <a-plane id="coral4" position="-1 2 -4" width="1.5" height="1" material="src: url(https://images.unsplash.com/photo-1569343155750-bae02893b3b7)"></a-plane>
      <a-plane id="coral5" position="1 2 -4" width="1.5" height="1" material="src: url(https://images.unsplash.com/photo-1597116856196-8889c5b0b8f3)"></a-plane>

      <!-- Invisible Click Triggers -->
      <a-box id="trigger1" position="-2 1 -3" depth="0.1" height="1" width="1" material="opacity:0"></a-box>
      <a-box id="trigger2" position="0 1 -3" depth="0.1" height="1" width="1" material="opacity:0"></a-box>
      <a-box id="trigger3" position="2 1 -3" depth="0.1" height="1" width="1" material="opacity:0"></a-box>
      <a-box id="trigger4" position="-1 2 -4" depth="0.1" height="1" width="1" material="opacity:0"></a-box>
      <a-box id="trigger5" position="1 2 -4" depth="0.1" height="1" width="1" material="opacity:0"></a-box>
    </a-scene>

    <script>
      const subtitles = [
        "You glide over a pale coral garden. These corals should be vibrant and full of life, but the heat of rising seas has drained their color. You can almost feel their silent plea for cooler waters.",
        "As you swim further, clusters of bleached coral stretch as far as you can see. More than half of the Great Barrier Reef has experienced bleaching at least once since 1998. This is the reef’s warning cry that the ocean is too warm.",
        "Look closely at the white skeleton-like branches. The corals are not just losing color; they are losing the tiny algae that feed them. Without these algae, many corals starve within weeks.",
        "Drifting upward, you notice vibrant fish darting between the corals—fewer than before. Bleached reefs become fragile homes, and many species leave or vanish when the reef can no longer shelter them.",
        "As you rise toward the sunlight, remember this underwater city protects our coasts and nurtures countless creatures. Every degree of warming puts more of it at risk. Protecting the reef means protecting life itself."
      ];

      const audios = [
        document.querySelector("#audio1"),
        document.querySelector("#audio2"),
        document.querySelector("#audio3"),
        document.querySelector("#audio4"),
        document.querySelector("#audio5")
      ];

      const subtitleDiv = document.getElementById("subtitle");

      audios.forEach((audio, i) => {
        const trigger = document.querySelector("#trigger" + (i + 1));
        trigger.addEventListener("click", () => {
          audios.forEach(a => a.pause());
          audio.currentTime = 0;
          audio.play();
          subtitleDiv.innerText = subtitles[i];
          audio.onended = () => { subtitleDiv.innerText = ""; };
        });
      });
    </script>
  </body>
</html>
